<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ry≈çiki Tenkai</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: url('clideo_editor_a113c19867f2476d955c9cc72a3afcc0-ezgif.com-crop.gif') no-repeat center center fixed;
    background-size: cover;
    color: white;
  }
  #menu {
    background-color: #222;
    padding: 10px;
    text-align: center;
    border-bottom: 2px solid #444;
    display: none;
  }
  .btn {
    background-color: #333;
    color: white;
    border: none;
    padding: 10px 15px;
    margin: 5px;
    cursor: pointer;
  }
  .btn:hover { background-color: #444; }
  #frame {
    width: 100%;
    height: calc(100vh - 60px);
    border: none;
    display: none;
  }
  .overlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.9);
    color: white;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 9999;
  }
  input { padding: 10px; font-size: 16px; margin-top: 10px; }
</style>
</head>
<body>

<!-- Password Screen -->
<div id="password-screen" class="overlay">
  <h2>Enter Password</h2>
  <input type="password" id="password" placeholder="Password">
  <button class="btn" onclick="checkPassword()">Enter</button>
</div>

<!-- About:blank Popup -->
<div id="aboutblank-popup" class="overlay" style="display:none;">
  <h2>Open site in about:blank?</h2>
  <button class="btn" onclick="openAboutBlank(true)">Yes</button>
  <button class="btn" onclick="openAboutBlank(false)">No</button>
</div>

<!-- Offline Prompt Modal -->
<div id="offline-modal" class="overlay" style="display:none;">
  <h2>Cache Waddle for Offline Use?</h2>
  <button class="btn" onclick="cacheWaddle()">Yes, cache</button>
  <button class="btn" onclick="skipCache()">No, continue</button>
</div>

<!-- Menu -->
<div id="menu">
  <button class="btn" onclick="switchSite('waddle-offline.html')">Waddle</button>
  <button class="btn" onclick="switchSite('https://nepu.to')">Movies</button>
  <button class="btn" onclick="switchSite('https://apes.io')">Apes.io</button>
</div>

<iframe id="frame" src="" allowtransparency="true"></iframe>

<script>
const PASSWORD = "KAIKAIKITAN";

function checkPassword() {
  const input = document.getElementById("password").value;
  if(input === PASSWORD) {
    document.getElementById("password-screen").style.display = "none";
    document.getElementById("aboutblank-popup").style.display = "flex";
  } else {
    alert("Wrong password.");
  }
}

// About:blank popup logic
function openAboutBlank(yes) {
  document.getElementById("aboutblank-popup").style.display = "none";
  // If yes, iframe will open in about:blank later when clicking
  localStorage.setItem('openAboutBlank', yes ? 'true' : 'false');
  document.getElementById("offline-modal").style.display = "flex";
}

// Offline caching
function cacheWaddle() {
  localStorage.setItem('waddle-offline', 'cached');
  alert("Waddle is now cached for offline use!");
  document.getElementById("offline-modal").style.display = "none";
  document.getElementById("menu").style.display = "block";
}

function skipCache() {
  document.getElementById("offline-modal").style.display = "none";
  document.getElementById("menu").style.display = "block";
}

// Switch iframe site
function switchSite(url) {
  const frame = document.getElementById("frame");
  const openBlank = localStorage.getItem('openAboutBlank') === 'true';
  frame.src = openBlank ? 'about:blank' : url;
  frame.style.display = "block";

  // If user chose about:blank, load actual URL inside iframe manually
  if(openBlank) {
    setTimeout(() => {
      frame.contentWindow.location.replace(url);
    }, 100);
  }
}
</script>

</body>
</html>
